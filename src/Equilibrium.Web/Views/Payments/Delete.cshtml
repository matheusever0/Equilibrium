@using Microsoft.AspNetCore.Html
@using Equilibrium.Web.Models.Payment
@model PaymentModel

@{
    ViewData["Title"] = "Excluir Pagamento";

    var htmlBuilder = new System.Text.StringBuilder();

    htmlBuilder.AppendLine("<div class='mb-3'>");
    htmlBuilder.AppendLine("<h6 class='small font-weight-bold text-muted'>Descrição</h6>");
    htmlBuilder.AppendLine($"<p>{Model.Description}</p>");
    htmlBuilder.AppendLine("</div>");

    htmlBuilder.AppendLine("<div class='mb-3'>");
    htmlBuilder.AppendLine("<h6 class='small font-weight-bold text-muted'>Valor</h6>");
    htmlBuilder.AppendLine($"<p class='fw-bold'>{Model.GetFormattedAmount()}</p>");
    htmlBuilder.AppendLine("</div>");

    htmlBuilder.AppendLine("<div class='mb-3'>");
    htmlBuilder.AppendLine("<h6 class='small font-weight-bold text-muted'>Data de Vencimento</h6>");
    htmlBuilder.AppendLine($"<p>{Model.GetFormattedDueDate()}</p>");
    htmlBuilder.AppendLine("</div>");

    htmlBuilder.AppendLine("<div class='mb-3'>");
    htmlBuilder.AppendLine("<h6 class='small font-weight-bold text-muted'>Tipo de Pagamento</h6>");
    htmlBuilder.AppendLine($"<p>{Model.PaymentTypeName}</p>");
    htmlBuilder.AppendLine("</div>");

    htmlBuilder.AppendLine("<div class='mb-3'>");
    htmlBuilder.AppendLine("<h6 class='small font-weight-bold text-muted'>Status</h6>");
    htmlBuilder.AppendLine($"<p><span class='badge {Model.StatusBadgeClass}'>{Model.StatusDescription}</span></p>");
    htmlBuilder.AppendLine("</div>");

    if (Model.Installments != null && Model.Installments.Any())
    {
        htmlBuilder.AppendLine("<div class='alert alert-warning'>");
        htmlBuilder.AppendLine("<i class='fas fa-exclamation-triangle me-2'></i>");
        htmlBuilder.AppendLine($" Este pagamento possui {Model.Installments.Count} parcelas que também serão excluídas.");
        htmlBuilder.AppendLine("</div>");
    }

    IHtmlContent entityDetails = new HtmlString(htmlBuilder.ToString());
}

<div class="container-fluid">
    <div class="d-flex justify-content-end mb-3">
        <partial name="_Partials/Commons/_BackButton" model='(
            Action: "Details",
            Controller: "Payments",
            Text: "Voltar")' />
    </div>

    <partial name="_Partials/Commons/_DeleteConfirmation" model='(
        EntityName: "pagamento",
        Id: Guid.Parse(Model.Id),
        EntityDetails: entityDetails)' />
</div>
